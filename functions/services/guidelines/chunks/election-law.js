/**
 * functions/services/guidelines/chunks/election-law.js
 * 선거법 준수 지침 청크
 *
 * 각 청크는 독립적인 규칙 단위로, 상황에 따라 선택적으로 주입됨
 */

'use strict';

const ELECTION_LAW_CHUNKS = [
  // ============================================================================
  // CRITICAL: 공약성 표현 금지 (STAGE_1: 준비/현역)
  // ============================================================================
  {
    id: 'EL-001',
    type: 'election_law',
    priority: 'CRITICAL',
    applies_to: { status: ['준비', '현역'] },
    keywords: ['공약', '약속', '당선', '선거', '출마'],
    instruction: '"~하겠습니다" 형태의 공약성 표현 금지 → 대체 표현 사용',
    forbidden: [
      '추진하겠습니다', '실현하겠습니다', '만들겠습니다', '해내겠습니다',
      '이루겠습니다', '전개하겠습니다', '제공하겠습니다', '활성화하겠습니다',
      '개선하겠습니다', '확대하겠습니다', '강화하겠습니다', '설립하겠습니다',
      '구축하겠습니다', '마련하겠습니다', '지원하겠습니다', '해결하겠습니다',
      '바꾸겠습니다', '변화시키겠습니다'
    ],
    examples: [
      { bad: '청년 일자리를 추진하겠습니다', good: '청년 일자리 정책을 연구하고 있습니다' },
      { bad: '교육 혁신을 실현하겠습니다', good: '교육 혁신이 필요합니다' },
      { bad: '복지 확대를 만들겠습니다', good: '복지 확대를 제안합니다' },
      { bad: '지역 발전을 이루겠습니다', good: '지역 발전을 위해 노력 중입니다' }
    ],
    replacements: {
      '추진하겠습니다': '을 연구하고 있습니다',
      '실현하겠습니다': '이 필요합니다',
      '만들겠습니다': '을 제안합니다',
      '해내겠습니다': '을 위해 노력 중입니다',
      '이루겠습니다': '을 제안합니다',
      '전개하겠습니다': '을 연구하고 있습니다',
      '제공하겠습니다': '이 필요합니다',
      '활성화하겠습니다': '이 필요합니다',
      '개선하겠습니다': '이 필요합니다',
      '확대하겠습니다': '이 필요합니다',
      '강화하겠습니다': '이 필요합니다',
      '설립하겠습니다': '을 제안합니다',
      '구축하겠습니다': '을 제안합니다',
      '마련하겠습니다': '을 제안합니다',
      '지원하겠습니다': '이 필요합니다',
      '해결하겠습니다': '을 연구하고 있습니다',
      '바꾸겠습니다': '을 제안합니다',
      '변화시키겠습니다': '이 필요합니다'
    }
  },

  // ============================================================================
  // CRITICAL: "공약" 단어 금지 (STAGE_1)
  // ============================================================================
  {
    id: 'EL-002',
    type: 'election_law',
    priority: 'CRITICAL',
    applies_to: { status: ['준비', '현역'] },
    keywords: ['공약', '정책', '비전', '계획'],
    instruction: '"공약" 단어 사용 금지 → "정책 방향", "비전", "정책 제안"으로 대체',
    forbidden: ['공약', '공약을 발표', '공약을 제시', '공약 사항', '첫 번째 공약', '두 번째 공약'],
    examples: [
      { bad: '저의 첫 번째 공약입니다', good: '저의 첫 번째 정책 제안입니다' },
      { bad: '공약을 발표하겠습니다', good: '정책 방향을 제안드립니다' },
      { bad: '핵심 공약 사항', good: '핵심 정책 방향' }
    ],
    replacements: {
      '공약': '정책 방향',
      '공약을 발표': '정책 방향을 제안',
      '공약을 제시': '정책 방향을 제안',
      '공약 사항': '정책 제안 사항',
      '첫 번째 공약': '첫 번째 정책 제안',
      '두 번째 공약': '두 번째 정책 제안',
      '세 번째 공약': '세 번째 정책 제안'
    }
  },

  // ============================================================================
  // CRITICAL: 지지 호소 표현 금지 (STAGE_1)
  // ============================================================================
  {
    id: 'EL-003',
    type: 'election_law',
    priority: 'CRITICAL',
    applies_to: { status: ['준비', '현역'] },
    keywords: ['지지', '투표', '선택', '부탁', '함께'],
    instruction: '지지/투표 호소 표현 금지 → "관심", "성원" 표현으로 대체',
    forbidden: [
      '지지해 주십시오', '지지를 부탁', '지지와 참여',
      '함께해 주십시오', '선택해 주십시오', '투표해 주십시오', '한 표 부탁'
    ],
    examples: [
      { bad: '지지해 주십시오', good: '관심 가져 주십시오' },
      { bad: '함께해 주십시오', good: '함께 고민해 주십시오' },
      { bad: '저를 선택해 주십시오', good: '관심 가져 주시면 감사하겠습니다' }
    ],
    replacements: {
      '지지해 주십시오': '관심 가져 주십시오',
      '지지를 부탁': '관심을 부탁',
      '지지와 참여를 부탁': '관심과 성원을 부탁',
      '지지와 참여': '관심과 성원',
      '함께해 주십시오': '함께 고민해 주십시오',
      '선택해 주십시오': '관심 가져 주십시오',
      '투표해 주십시오': '관심 가져 주십시오'
    }
  },

  // ============================================================================
  // CRITICAL: 당선/선거 직접 언급 금지 (STAGE_1)
  // ============================================================================
  {
    id: 'EL-004',
    type: 'election_law',
    priority: 'CRITICAL',
    applies_to: { status: ['준비', '현역'] },
    keywords: ['당선', '선거', '재선', '출마', '후보'],
    instruction: '당선/선거 직접 언급 금지 → 우회 표현 사용',
    forbidden: [
      '당선되면', '당선 후', '당선되어', '다음 선거', '재선을 위해',
      '선거 준비', '출마 준비', '예비후보', '출마 예정'
    ],
    examples: [
      { bad: '당선되면 추진하겠습니다', good: '이 정책이 실현된다면 좋겠습니다' },
      { bad: '다음 선거에서', good: '앞으로' },
      { bad: '재선을 위해 노력', good: '더 나은 지역을 위해 노력' }
    ],
    replacements: {
      '당선되면': '이 정책이 실현된다면',
      '당선 후': '향후',
      '당선되어': '힘을 모아',
      '다음 선거': '앞으로',
      '재선을 위해': '더 나은 지역을 위해',
      '선거 준비': '정책 연구',
      '출마 준비': '정책 연구',
      '예비후보': '',
      '출마 예정': '정치 활동 중인'
    }
  },

  // ============================================================================
  // CRITICAL: 약속 표현 금지 (STAGE_1)
  // ============================================================================
  {
    id: 'EL-005',
    type: 'election_law',
    priority: 'CRITICAL',
    applies_to: { status: ['준비', '현역'] },
    keywords: ['약속', '반드시', '꼭', '실현'],
    instruction: '"약속드립니다", "반드시 실현" 등 공약성 약속 표현 금지',
    forbidden: [
      '약속드립니다', '약속 드립니다', '약속드리겠습니다', '약속하겠습니다',
      '반드시 실현', '꼭 실현'
    ],
    examples: [
      { bad: '주민 여러분께 약속드립니다', good: '이 방향으로 노력하겠습니다' },
      { bad: '반드시 실현하겠습니다', good: '실현될 수 있도록 노력하겠습니다' }
    ],
    replacements: {
      '약속드립니다': '이 방향으로 노력하겠습니다',
      '약속 드립니다': '이 방향으로 노력하겠습니다',
      '약속드리겠습니다': '이 방향으로 노력하겠습니다',
      '약속하겠습니다': '이 방향으로 노력하겠습니다',
      '반드시 실현': '실현될 수 있도록 노력',
      '꼭 실현': '실현될 수 있도록 노력'
    }
  },

  // ============================================================================
  // HIGH: 예비후보 단계 규칙 (STAGE_2)
  // ============================================================================
  {
    id: 'EL-010',
    type: 'election_law',
    priority: 'HIGH',
    applies_to: { status: ['예비'] },
    keywords: ['투표', '기호', '선택'],
    instruction: '예비후보 단계: 대부분 허용되나 "투표해 주십시오"는 아직 불가',
    forbidden: ['투표해 주십시오', '저를 선택해 주십시오', '기호 1번', '기호 2번'],
    examples: [
      { bad: '투표해 주십시오', good: '지지해 주십시오' },
      { bad: '기호 1번입니다', good: '예비후보로 인사드립니다' }
    ],
    replacements: {
      '투표해 주십시오': '지지해 주십시오',
      '저를 선택해 주십시오': '함께해 주십시오'
    }
  },

  // ============================================================================
  // MEDIUM: 본 후보 단계 (STAGE_3) - 대부분 허용
  // ============================================================================
  {
    id: 'EL-020',
    type: 'election_law',
    priority: 'MEDIUM',
    applies_to: { status: ['후보'] },
    keywords: ['금품', '향응', '매수'],
    instruction: '본 후보 단계: 대부분 허용, 금품/향응 관련 표현만 금지',
    forbidden: ['금품', '향응', '돈을 드리'],
    examples: [
      { bad: '당선되면 금품을 드리겠습니다', good: '(불법 - 사용 불가)' }
    ],
    replacements: {}
  }
];

/**
 * 상태별 적용 가능한 청크 필터링
 */
function getChunksForStatus(status) {
  return ELECTION_LAW_CHUNKS.filter(chunk =>
    chunk.applies_to.status.includes(status)
  );
}

/**
 * CRITICAL 우선순위 청크만 필터링
 */
function getCriticalChunks(status) {
  return ELECTION_LAW_CHUNKS.filter(chunk =>
    chunk.priority === 'CRITICAL' &&
    chunk.applies_to.status.includes(status)
  );
}

module.exports = {
  ELECTION_LAW_CHUNKS,
  getChunksForStatus,
  getCriticalChunks
};
